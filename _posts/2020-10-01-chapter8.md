---
title: التعامل مع النصوص
show_title: true
chapter_number: 8
chapter_text: الفصل الثامن
chapter_lessons: [[0, 'مقدمة'], [1, 'دوال النصوص في بايثون'], [2, 'التعابير النمطية RegEx'], [3, 'التعابير النمطية في بايثون وبانداز']]
chapter_sublessons: [
    [],
    ['دوال النصوص في بايثون', 'تنظيف البيانات النصيه', 'دوال النصوص', 'دوال النصوص في بانداز'],
    [['كتابة أوامر التعابير النمطية', 'حرفياً', 'رموز خاصه', 'الفئات النصيه', 'عكس الفئات النصيه', 'الحدود الرقمية', 'الإرساء', 'تجاهل الرموز الخاصه'], 'مرجع التعابير النمطية'],
    ['RE.SEARCH', 'RE.FINDALL', 'REGEX مجموعات', 'RE.SUB', 'RE.SPLIT', 'REGEX و بانداز']
]
layout: default
---

## مقدمة

الكثير من البيانات التي نواجهها في ملف CSV ليست أرقام بس نصوص موجوده في كُتب، ملفات، تدوينات، او تعليقات في الانترنت. كما في الكثير من انواع البيانات، هناك طرق مختلفه للتعامل مع النصوص وقد نحتاج لكتابة اكثر من كتاب لشرحها بشكل تفصيلي. في هذا الفصل، سنشرح جزء بسيط من هذه التقنيات والتي توفر لنا العديد من العمليات المفيده للعمل مع النصوص: معالجة نصوص بايثون و التعابير النمطية RegEx.

### دوال النصوص في بايثون

توفر لنا بايثون العدد من الدوال للتعامل مع النصوص. رغم بساطتها، تعد هذه الدوال من الأولويات في التعامل مع النصوص والتي جُمعت مع بعضها البعض لتكون دوال اكثر تعقيداً. سنقوم بشرح دوال بايثون للتعامل مع النصوص حسب كثرة الإستخدام في تنظيف البيانات النصيه.

#### تنظيف البيانات النصيه

تأتي البيانات عادةً من عدة مصادر وكل مصدر لديه طريقه مختلفه لترميز المعلومات. في المثال التالي، لدينا جدول يحتوي على الولايات الأمريكيه والمقاطعات التي تشملها وجدول آخر يحتوي على عدد سكان المقاطعه.

```python
state = pd.DataFrame({
    'County': [
        'De Witt County',
        'Lac qui Parle County',
        'Lewis and Clark County',
        'St John the Baptist Parish',
    ],
    'State': [
        'IL',
        'MN',
        'MT',
        'LA',
    ]
})
population = pd.DataFrame({
    'County': [
        'DeWitt  ',
        'Lac Qui Parle',
        'Lewis & Clark',
        'St. John the Baptist',
    ],
    'Population': [
        '16,798',
        '8,067',
        '55,716',
        '43,044',
    ]
})
```

**State**|**County**| 
:-----:|:-----:|:-----:
IL|De Witt County|0
MN|Lac qui Parle County|1
MT|Lewis and Clark County|2
LA|St John the Baptist Parish|3

<br>

**Population**|**County**| 
:-----:|:-----:|:-----:
16,798|DeWitt|0
8,067|Lac Qui Parle|1
55,716|Lewis & Clark|2
43,044|St. John the Baptist|3

بالطبع نريد جمع جدولي `state` و `population` معاً بإستخدام العامود `County`. للأسف، لا تتطابق أي من اسماء المقاطعات في الجدولين. هذا المثال يوضح عدد من المشاكل في البيانات النصيه وهي كالتالي:

- الكتابة بحروف كبيره / صغيره: `qui` و `Qui`.
- علامات ترقيم مختلفة: `St.` و `St`.
- عدم كتابة بعض الكلمات: مثلاً كلمتي `County`/`Parish` لم يتم كتابتها في جدول `population`.
- اضافة مسافات: `DeWitt` و `De Witt`.
- استخدام مُختلف للإختصارات: `&` و `and`.

#### دوال النصوص

دوال النصوص في بايثون تساعدنا بالبدء في حل هذه المشاكل. هذه الدوال مُعرّفه في جميع نسخ بايثون لذا لا نحتاج لإستخادم اي مكتبه أخرى. على الرغم انه مهم جداً لك شخصياً معرفة [جميع الدوال للتعامل مع النصوص](https://docs.python.org/3/library/stdtypes.html#string-methods)، قمنا بشرح بعض من اكثر الدوال استخداماً في الجدول التالي:

**الداله**|**الوصف**
:-----:|:-----:
str[x:y]| تقوم الداله بفصل النص `str` من `x` (تشمل الحرف) حتى `y` (لا تشمل الحرف). 
()str.lower| تنشئ نسخه من النص `str` بعد تحويل جميع الحروف فيه إلى حروف صغيره. 
str.replace(a, b)| تحويل جميع مرات ظهور النص/الحرف `a` في  `str` إلى النص/الحرف `b`. 
str.split(a)| تقوم الدالة بفصل النص `str` عند ظهور النص/الحرف `a`. 
()str.strip| تحذف الداله المسافات الفارغه في بداية ونهاية النص `str` 

قمنا بإختيار النص `St. John the Baptist` من جدولي `state` و `population` لتطبيق دوال النصوص بحذف الحروف الكبيره، علامات الترقيم، و التخصل من الكلمتين `county` و `parish`:

```python
john1 = state.loc[3, 'County']
john2 = population.loc[3, 'County']

(john1
 .lower()
 .strip()
 .replace(' parish', '')
 .replace(' county', '')
 .replace('&', 'and')
 .replace('.', '')
 .replace(' ', '')
)
```

```ruby
'stjohnthebaptist'
```

تطبيق نفس الدوال على `john2` يأكد لنا ان النصين مُتطابقان:

```python
(john2
 .lower()
 .strip()
 .replace(' parish', '')
 .replace(' county', '')
 .replace('&', 'and')
 .replace('.', '')
 .replace(' ', '')
)
```

```ruby
'stjohnthebaptist'
```

عند الوصول لنتيجة مُقنعه، نقوم بتعريف دالة بأسم `clean_county` والتي ستطبق مهام تنظيف المدخلات (المقاطعات):

```python
def clean_county(county):
    return (county
            .lower()
            .strip()
            .replace(' county', '')
            .replace(' parish', '')
            .replace('&', 'and')
            .replace(' ', '')
            .replace('.', ''))
```

يمكننا التأكد ان الداله `clean_county` تقوم بتوحيد جميع اسماء المقاطعات عبر تطبيقها على الجدولين:

```python
([clean_county(county) for county in state['County']],
 [clean_county(county) for county in population['County']]
)
```

```ruby
(['dewitt', 'lacquiparle', 'lewisandclark', 'stjohnthebaptist'],
 ['dewitt', 'lacquiparle', 'lewisandclark', 'stjohnthebaptist'])
```

بما ان كلا العامودين الآن يحتويان على نفس اسم المقاطعه وبنفس الشكل، يمكننا جمع الجدولين معاً بإستخدام اسم المقاطعه.

#### دوال النصوص في بانداز

### التعابير النمطية RegEx

#### كتابة أوامر التعابير النمطية

#### حرفياً

#### رموز خاصه

#### الفئات النصيه

#### عكس الفئات النصيه

#### الحدود الرقمية

#### الإرساء

#### تجاهل الرموز الخاصه

### مرجع التعابير النمطية

### التعابير النمطية في بايثون وبانداز

#### RE.SEARCH

#### RE.FINDALL

#### REGEX مجموعات

#### RE.SUB

#### RE.SPLIT

#### REGEX و بانداز




[📝][HTTPStatusCodes]

[HTTPStatusCodes]: https://www.restapitutorial.com/httpstatuscodes.html