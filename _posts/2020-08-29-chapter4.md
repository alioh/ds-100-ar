---
title: التحليل الاستكشافي للبيانات
show_title: true
chapter_number: 4
chapter_text: الفصل الرابع
chapter_lessons: [[0, 'مقدمة'], [1, 'انواع البيانات']]
chapter_sublessons: [
    [],
    ['انواع البيانات الحسابية × الاحصائية', 'اهمية انواع البيانات', 'مثال: تدخين الأم وصحة الطفل الرضيع', 'مثال: المخالفات الصحيه في مطاعم سان فرانسيسكو', 'البيانات النصية ليست دائماً اسميه', 'التحقق من الوصف المفقود']
]
layout: default
---

## مقدمة

في التحليل الاستكشافي للبيانات، أحدى أهم الخطوات في دورة حياة علم البيانات، نقوم بالتلخيص، الرسم البياني وتحويل البيانات لشكل يسهل علينا فهمها بشكل واضح. الإحصائي "جون توكي"  الذي عرّف التحليل الاستكشافي للبيانات كالتالي:

> "التحليل الاستكشافي للبيانات" هي طريقة، حالة ذات مرونة، ورغبة في أن نرى تلك الأشياء التي نؤمن أنها ليست موجودة في البيانات، وكذلك تلك التي نؤمن بوجودها.

طالب علم البيانات قد يرى هذا التعريف غير كافي، هل طريقة الإستكشاف فقط كافية لإيجاد تحليل بيانات؟ على العكس، نقطة "توكي" هي أنه يجب علينا فهم البيانات قبل التسرع بتطبيق الإختبارات الإحصائية. سنستفيد من كلامه في خوارزميات إتخاذ القرارات هذه الأيام.

في خطوة التحليل الاستكشافي للبيانات نسعى لفهم البيانات بشكل عميق. والإبقاء على "حالة المرونة" لتساعدنا على إيجاد ما نبحث عنه. فهمنا للأدوات الحسابية يساعدنا على البدء بعملية البحث. في هذا الفصل، سنركز على الأطباع المهمة عندما نعرف الادوات الأكثر تطوراً. على رغم إختلاف التحليل الاستكشافي للبيانات في المجالات المختلفة، غالباً ما نبدأ الاستكشاف بفهم التالي:
- أنواع البيانات في العواميد وتقسيم البيانات في الصفوف.
- توزيع البيانات الرقمية ومقياس الوسط والإنتشار.
- العلاقات بيت البيانات الكمية.

## انواع البيانات

عادة ما نبدأ التحليل الاستكشافي للبيانات بعرض انواع البيانات في الجداول. على الرغم من وجود طُرق كثيرة لتصنيف انواع البيانات، في هذا الكتاب سنستخدم ثلاث من اشهر الانواع:
- **البيانات الاسمية**: يقصد بها البيانات التي تعبر عن تصنيفات ليس لها ترتيب معين. مثلاً: الانتماء السياسي ( ديموقراطي، جمهوري، غيرها)، الجنس (ذكر، انثى)، نظام الحاسب ( ويندوز، ماكنتوش، لينكس).
- **البيانات الترتيبية**: بيانات بتصنيفات مرتبه. مثل: مقاسات الملابس ( صغير، وسط، كبير)، مقياس ليكرت (معارض، حيادي، يتفق)، مستوى التعليم (ثانوي، بكالريوس، ماجستير). البيانات الاسمية والترتيبية تعتبر انواع من البيانات التصنيفية. [📝][Likert]
- **البيانات الكمية**: وهي البيانات العددية أو الرقمية. مثل: الطول، السعر، والمسافة.

ونشير لهذه الانواع بـ **انواع البيانات الإحصائية**، أو للتبسيط **انواع البيانات**.

### انواع البيانات الحسابية × الاحصائية

تقوم بانداز بتعيين نوع حسابي لكل عامود لدينا ليمثل كيف يتم حفظ البيانات في ذاكرة الحاسب. يجب أن نتذكر دائماً ان انواع البيانات الحسابية قد تختلف عن الاحصائية.

مثلاً، لنأخذ الجدول التالي الذي يحتوي على اوزان الاطفال بعد الولادة، عرق الأم، والمستوى التعليمي للأم.

> لتحميل البيانات، [اضغط هنا]({{ site.baseurl }}/files/chapter4/babies23.data).

```python
babies_small = pd.read_csv('babies23.data', delimiter='\s+')[['wt', 'race', 'ed']]
babies_small
```

|**ed**|**race**|**wt**||
:-----:|:-----:|:-----:|:-----:
|5|8|120|0|
|5|0|113|1|
|2|0|128|2|
|...|...|...|...|
|2|1|130|1233|
|4|0|125|1234|
|4|0|117|1235|

```center-result
1236 rows × 3 columns
```

كل عامود في هذا الـ DataFrame هو حسابياً من النوع الكمي. في بياناتنا هذه، النوع `int64` يعني ان كل عامود يحتوي على عدد صحيح:

```python
babies_small.dtypes
```

```ruby
wt      int64
race    int64
ed      int64
dtype: object
```

ولكن، لن يكون مفهوماً العمل مع هذه العواميد كبيانات احصائية رقمية. لفهم انواع البيانات لدينا، يجب علينا دائماً العودة إلى **قاموس البيانات**. قاموس البيانات هو شرح تفصيلي يأتي مع البيانات على ما يحتويه كل عامود. مثلاً، قاموس البيانات للبيانات التي تعمل عليها الآن هو كالتالي:

```ruby
wt -  الوزن عند الولادة بالأونصة (999 غير معروف)
race - عرق الأم
    0-5=بيضاء
    6=مكسيكية
    7=سوداء
    8=آسيوية
    9=منوعة
    99=غير معروف
ed - مستوى تعليم الأم 
   0= اقل من السنة الثامنة, 
   1= من السنة الثامنة حتى 12 - لم تتخرج, 
   2= خريجة ثانوية
   3= ثانوية + مهنية,
   4=ثانوية + جامعة
   5= خريجة جامعة
   6&7= ثانوية مهنية غير معروفة
   9=غير معروف
```

رقم ان العواميد الثلاثة `wt`، `race` و `ed` محفوظة كأعداد صحيحه في بانداز، العامود `race` يحتوي على بيانات الاسمية والعامود `ed` يحتوي على بيانات ترتيبية.

بالأصح، يجب علينا الحذر دائماً حتى مع العامود `wt`. عند محاولة إيجاد معدل متوسط هذا العامود، لن نحصل على بيانات دقيقه لأن العامود يحتوي على قيم بالرقم 999 والتي تعني قيم اوزان غير معروفة للطفل. اذا تركناه كما هو، القيم غير المعروفة ستجعل متوسط الاوزان لدينا اعلى من ما يكون.

### اهمية انواع البيانات

انواع البيانات توجهنا بالطريقة الصحيحه للقيام بالعمليات، رسم البيانات، والعمليات التي يمكن ان نطبقها على البيانات. مثلاً، الفرق يعتبر مهم عندنا يحدث في البيانات الكمية على العكس عندما يكون في البيانات الترتيبية. هذا يعني في بيانات اوزان الاطفال بعد الولادة المتوسط للوزن يعتبر له معنى على عكس متوسط مستوى التعليم.

بانداز لن تكترث عندما نحاول إيجاد المتوسط للقيم في عامود مستوى التعليم:

```python
babies_small['ed'].mean()
```

```ruby
2.9215210355987056
```

هذه القيمة لا تقدم لنا اي معلومات. يمكن ان نستبدل القيم في العامود `ed` بمعانيها النصية. مثلاً، يمكن ان نستبدل 0 ب "اقل من السنة الثامنه" و 1 ب "من السنة الثامنة حتى 12 - لم تتخرج" وهكذا. لن نقول ايضاً ان المتوسط للقيم النصيه له معنى كذلك المتوسط للقيم الكميه لهذا العامود.

رغم ان الفرق في البيانات الترتيبة ليس له معنى، نتيجته قد تقدم لنا بعض المعلومات. مثلاً، يمكننا القول ان ام بقيمة `ed=5` (خريجة جامعة) اعلى تعليماً من ام بقيمة `ed=2` (خريجة ثانوية).

على العكس، لا يأثر علينا الفرق في البيانات الاسمية. الام التي قيمته العرق فيها `race=6` (مكسيكيه) و ام `race=7` (سوداء) ببساطة لديهم اعراق مختلفه.

## مثال: تدخين الأم وصحة الطفل الرضيع

مؤسسة صحة وتنمية الطفل ([CHDS](http://www.chdstudies.org/about_us/index.php)) قامت بإجراء ابحاث لفترات طويلة عن كيف ان الصحة والامراض تنتقل بين الاجيال.

في أحدى الدراسات، قامت المؤسسة بجمع بيانات من عدة اجيال بين 1960 و 1967 لسيدات في سان فرانسيسكو - إيست باي. على الرغم ان المؤسسة تجبر على تقديم طلب للحصول على هذه البيانات، جزء من هذه البيانات تم إتاحته بواسطة قسم الإحصاء ([رابط](https://www.stat.berkeley.edu/users/statlabs/)). قمنا بتحميل البيانات وقرائتها في بانداز:

> لتحميل البيانات، [اضغط هنا]({{ site.baseurl }}/files/chapter4/babies.data).

```python
babies = pd.read_csv('data/babies.data', delimiter='\s+')
babies
```

|**smoke**|**weight**|**height**|**age**|**parity**|**gestation**|**bwt**||
:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:
|0|100|62|27|0|284|120|0|
|0|135|64|33|0|282|113|1|
|1|115|64|28|0|279|128|2|
|...|...|...|...|...|...|...|...|
|1|150|65|30|0|291|130|1233|
|0|110|65|21|1|281|125|1234|
|0|129|65|38|0|297|117|1235|

```center-result
1236 rows × 7 columns
```

لفهم انواع البيانات في العواميد، نعود دائماً لقاموس البيانات:

|**العامود**|**الوصف**|
|:-----:|:-----:
|bwt|الوزن عند الولادة بالأونصة (999 غير معروف)|
|gestation|مدة الحمل بالايام (999 غير معروف)|
|parity|هل أول مولود؟ 0=أول مولود، 9= غير معروف|
|age|عمر الام بالسنوات|
|height|طول الام بالبوصة (99 غير معروف)|
|weight|وزن الام قبل الولادة بالباوند (999 غير معروف)|
|smoke|حالة تدخين الام: 0=لا تدخن الآن، 1=تدخن الآن، 9=غير معروف|

رغم ان القاموس لا يبين انواع البيانات، يمكننا رؤية ان بعض العواميد تحتوي على بيانات اسمية رغم ان القيم الموجودة فيها عبارة عن ارقام. بناءاً فقط على وصف العامود، يمكننا معاملة العامودين `parity` و `smoke` كبيانات اسميه والبقية كرقمية.

نتمنى ان يقدم لنا القاموس كافة المعلومات المهمه عن كل عامود، ولكن من الأفضل دائماً التأكد من البيانات عن طريق فحصها. مثلاً، لا يبدو واضحاً دائماً اذا كانت القيم في عامود العمر تحتوي على ارقام (21، 30، 41) او نطاقات (21-29، 30-40، 41+).

بيانات `babies` يبدو انها تحتوي على اعداد صحيحة فقط:

```python
babies
```

|**smoke**|**weight**|**height**|**age**|**parity**|**gestation**|**bwt**||
:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:
|0|100|62|27|0|284|120|0|
|0|135|64|33|0|282|113|1|
|1|115|64|28|0|279|128|2|
|...|...|...|...|...|...|...|...|
|1|150|65|30|0|291|130|1233|
|0|110|65|21|1|281|125|1234|
|0|129|65|38|0|297|117|1235|

```center-result
1236 rows × 7 columns
```

لنأخذ لمحه سريعة عن قيم عامود، يمكننا استخدام دالة `series.value_counts()` والتي تظهر لنا عدد مرات تكرار قيمة ما:

```python
# تعرض العمر يسار وعدد مرات تكرارة على اليمين
babies['age'].value_counts()
```

```ruby
23    93
26    90
24    86
      ..
45     1
44     1
15     1
Name: age, Length: 31, dtype: int64
```

يمكن أن نرى ان الكثير من الامهات في بياناتنا يبلغ اعمارهم بين 24 و 26 سنه. ايضاً، لا نرى اعمار بقيم كسرية (مثلاً 24.5)، يدل ذلك ان العامود `age` يحتوي على ارقام صحيحة.

بشكل تلقائي، تقوم بانداز بتقييد عدد النتائج التي تظهر لنا. ولعرض المزيد من الأسطر يمكننا القيام بالتالي:

```python
from IPython.display import display

# في هذا الحقل، اظهر 10 اسطر. لعرض عدد اسطر اكبر
# غير الرقم 10 في الكود البرمجي التالي إلى رقم اعلى
with pd.option_context('display.max_rows', 10):
    display(babies['age'].value_counts())
```

```ruby
23    93
26    90
24    86
27    85
22    79
      ..
42     4
99     2
45     1
44     1
15     1
Name: age, Length: 31, dtype: int64
```

بعد القيام بمراجعة كل العواميد بنفس الطريقة السابقة. نقوم بتحديد نوع كل عامود بناءاً على قاموس البيانات ومراجعتنا للبيانات:

|**العامود**|**الوصف**|**نوع البيانات**|
|:-----:|:-----:|:-----:|
|bwt|الوزن عند الولادة بالأونصة (999 غير معروف)|كمية|
|gestation|مدة الحمل بالايام (999 غير معروف)|كمية|
|parity|هل أول مولود؟ 0=أول مولود، 9= غير معروف|اسمية|
|age|عمر الام بالسنوات|كمية|
|height|طول الام بالبوصة (99 غير معروف)|كمية|
|weight|وزن الام قبل الولادة بالباوند (999 غير معروف)|كمية|
|smoke|حالة تدخين الام: 0=لا تدخن الآن، 1=تدخن الآن، 9=غير معروف|اسمية|

## مثال: المخالفات الصحيه في مطاعم سان فرانسيسكو

تقوم مدينة سان فرانسيسكو، كاليفورنيا دورياً بفحص المطاعم للتحقق من المخالفات الصحية. في كل عملية فحص، يحصل المطعم على تقييم من 0 إلى 100 بناءاً على عدد وانواع المخالفات التي سجلت عليه. المطاعم، التقييم والمخالفات جميعها متوفرة بشكل عام في موقع DataSF ([الرابط](https://data.sfgov.org/Health-and-Social-Services/Restaurant-Scores-LIVES-Standard/pyih-qa8i))، الملف يحتوي على جميع الفحوص من شهر يناير 2016.

قمنا بتحميل جزء من البيانات للمتغير `scores`:

> لتحميل البيانات، [اضغط هنا]({{ site.baseurl }}/files/chapter4/SFRestaurants.csv).

```python
scores = pd.read_csv('data/SFRestaurants.csv')
scores
```

||**الاسم التجاري**|**نتيجة الفحص**|**شرح المخالفه**|**درجة الخطوره**|
|:-----:|:-----:|:-----:|:-----:|:-----:|
|0|All stars Donuts|86.0|Unclean or degraded floors walls or ceilings|Low Risk|
|1|Soo Fong Restaurant|92.0|Wiping cloths not clean or properly stored or ...|Moderate Risk|
|2|Dar Bar Pakistani/Indian Cusine|86.0|Moderate risk vermin infestation|Low Risk|
|...|...|...|...|...|
|52795|USA Power Market|71.0|Unclean hands or improper use of gloves|High Risk|
|52796|Thai Cottage Restaurant|81.0|Inadequate and inaccessible handwashing facili...|Moderate Risk|
|52797|St Mary's Cathedral/Convention Center|90.0|Inadequate and inaccessible handwashing facili...|Moderate Risk|

```center-result
52798 rows × 4 columns
```

في هذه البيانات، نحن محظوظين أن لدينا قاموس يقدم لنا معلومات عن البيانات:

|**العامود**|**نوع البيانات**|**الوصف**|
|:-----:|:-----:|:-----:|
|business_name|string|الأسم العام للمتجر|
|inspection_score|number|نتيجة الفحص، قيمة من 0 إلى 100|
|violation_description|string|وصف بسطر واحد للمخالفات|
|risk_category|string|(لم يعطى وصف)|

لاحظ أن القاموس يشرح انواع البيانات حسابياً وليس انواعها بشكل احصائي. مثلاً، يستخدم `string` بدلاً من التحديد اذا كانت اسميه او ترتيبيه. ايضاً، العامود `risk_category` لا يحتوي على وصف 

### البيانات النصية ليست دائماً اسميه

العامود `violation_description` يبين لنا وصف للمخالفات. لكن لم يوضح لنا في القاموس اذا ما علينا معاملة البيانات في هذا العامود كبيانات اسميه. قد يحتوي العامود على بيانات **نصيه غير منظمه**، او بيانات ادخلت يدوياً. النصوص غير المنظمه عادة ما تأتي من مصادر بيانات بلغه طبيعيه، مثل مقالات الصحف، بحث قوقل، و ردود اسئلة الاستبيانات.

عاده لا نتعامل مع تلك البيانات كبيانات اسميه، البيانات الاسميه عاده تتكون من تصنيفات محدده، على عكس النصوص الغير منظمه. لذا، يجيب علينا التحقق من القيم في العامود `violation_description` لتحديد ما اذا كانت تحتوي على بيانات نصيه غير منظمه او بيانات اسميه.

اذا كان العامود يحتوي على بيانات نصيه غير منظمه، فيجب ان نتوقع تكرار قليل لبعض القيم بسبب وجود طرق كثيره لتسجيل نفس المخالفة: `unclean floors` "ارضيه غير نظيفه", `dirty floors` "ارضيه قذره", `floor needs cleaning` "الارضيه تحتاج للتنظيف" وغيرها الكثير. في الجانب الآخر، اذا كان العامود يحتوي على قيم محدده مسبقاً، الكثير منها سيتكرر.

نريد ان نتحقق ما اذا كان العامود يحتوي على قيم مكرره:

```python
with pd.option_context('display.max_rows', 14):
    display(scores['violation_description'].value_counts())
```

```ruby
Unclean or degraded floors walls or ceilings                          3668
Unapproved or unmaintained equipment or utensils                      2704
Inadequate and inaccessible handwashing facilities                    2653
Moderate risk food holding temperature                                2588
Inadequately cleaned or sanitized food contact surfaces               2467
Wiping cloths not clean or properly stored or inadequate sanitizer    2121
Foods not protected from contamination                                1929
                                                                      ... 
Discharge from employee nose mouth or eye                                6
Noncompliance with Gulf Coast oyster regulation                          5
Mobile food facility stored in unapproved location                       4
Mobile food facility with unapproved operating conditions                3
Unreported or unrestricted ill employee with communicable disease        1
Noncompliance with Cottage Food Operation                                1
Mobile food facility HCD insignia unavailable                            1
Name: violation_description, Length: 67, dtype: int64
```

النتيجة تجعلنا نتأكد ان القيم المحفوظة في هذا العامود تم تحديدها مسبقاً في قائمه للمخالفات المُحتمله. لذا، سنتعامل مع العامود `violation_description` كعامود يحتوي على بيانات اسميه.

### التحقق من الوصف المفقود

رغم ان العامود `risk_category` لم يتم وصفه في قاموس البيانات، يمكننا التحقق من محتوى العامود لمحاولة فهم معناه. أولاً، نلاحظ ان العامود يحتوي على ثلاث قيم فقط:

```python
scores['risk_category'].value_counts()
```

```ruby
Low Risk         19694
Moderate Risk    14712
High Risk         5686
Name: risk_category, dtype: int64
```

يمكن ان نفهم ان هذه القيم تشرح خطورة المخالفة. يمكننا التحقق من فهمنا عن طريق عرض المخالفات لكل قيمة من القيم الموجوده في العامود `risk_category`:

```python
def risk_counts(risk):
    return (scores.loc[scores['risk_category'] == risk,
                       'violation_description']
            .value_counts().head())
```

> الكاتب عرّف دالة تستقبل نص وهنا النص احدى الأنواع الثلاثه من خطوره المخالفات، الدالات ينتج عنها DataFrame يحتوي على كل نوع من المخالفة وعدد مرات تكراره. ممكن مراجعة الفصل السابق لمعلومات اكثر عن `.loc` وكيفية ايجاد الأسطر التي تحتوي على قيم معينه.

```python
risk_counts('High Risk')
```

```ruby
High risk food holding temperature             1619
Unclean or unsanitary food contact surfaces    1197
Improper cooling methods                        823
Unclean hands or improper use of gloves         755
High risk vermin infestation                    712
Name: violation_description, dtype: int64
```

```python
risk_counts('Moderate Risk')
```

```ruby
Inadequate and inaccessible handwashing facilities         2653
Moderate risk food holding temperature                     2588
Inadequately cleaned or sanitized food contact surfaces    2467
Foods not protected from contamination                     1929
Moderate risk vermin infestation                           1814
Name: violation_description, dtype: int64
```

```python
risk_counts('Low Risk')
```

```ruby
Unclean or degraded floors walls or ceilings                          3668
Unapproved or unmaintained equipment or utensils                      2704
Wiping cloths not clean or properly stored or inadequate sanitizer    2121
Improper food storage                                                 1817
Unclean nonfood contact surfaces                                      1440
Name: violation_description, dtype: int64
```

وبشكل سريع نلاحظ، ان انواع المخالفات مقسمه حسب درجة الخطوره. ايضاً، المخالفات من الدرجة `High Risk` احتمالية تسببها لأمراض اكثر من المخالفات من الدرجه `Low Risk`. من المحتمل ان يكون مطعماً بمخالفة `High risk vermin infestation` "خطورة حصول غزو حشري" أقل نظافة من مطعم بمخالفة `Unclean nonfood contact surfaces` "اسطح غير مخصصه للطعام غير نظيفة".

بسبب ذلك، قررنا أن العامود `risk_category` يحتوي على بيانات ترتيبيه توضح درجة خطورة كل مخالفة (Low Risk < Moderate Risk < High Risk).

### مراجعة قاموس البيانات

|**العامود**|**نوع البيانات**|**الوصف**|
|:-----:|:-----:|:-----:|
|business_name|string|الأسم العام للمتجر|
|inspection_score|number|نتيجة الفحص، قيمة من 0 إلى 100|
|violation_description|string|وصف بسطر واحد للمخالفات|
|risk_category|string|درجة خطورة المخالفة (Low Risk < Moderate Risk < High Risk)|


## ملخص

عرفنا البيانات الاسميه، الترتيبيه والكميه واهميتها في علم البيانات. شاهدنا امثله على بيانات، واستعنا بقواميس البيانات وبالبيانات نفسها لتحديد انواع البيانات لكل عامود. وتأكد أن تفرق بين انواع البيانات الحسابيه والإحصائيه.


[Likert]: https://ar.wikipedia.org/wiki/%D9%85%D9%82%D9%8A%D8%A7%D8%B3_%D9%84%D9%8A%D9%83%D8%B1%D8%AA